// import { useState } from 'react';
// import styles from "./styles.module.css";
// import { generateChart } from '../../api/GetChart';
// import type { ChartResponse } from '../../api/GetChart';


// const NatalChartPage = () => {
//   const [chartData, setChartData] = useState<ChartResponse | null>(null);
//   const [isLoading, setIsLoading] = useState(false);
//   const [error, setError] = useState<string | null>(null);
//   const [isPopupOpen, setIsPopupOpen] = useState(false);

//   const handleGenerateChart = async () => {
//     setIsLoading(true);
//     setError(null);
    
//     try {
//       // –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
//       const data = {
//         telegram_id: 665444333,
//         name: "–†–æ–º–∞–Ω",
//         date_year: 2004,
//         date_month: 2,
//         date_day: 10,
//         date_hour: 9,
//         date_min: 35,
//         location_lat: 55.7558,
//         location_lon: 83.6176,
//         location_utc_offset: "+06:00"
//       };
      
//       const response = await generateChart(data);
//       setChartData(response);
//       setIsPopupOpen(true);
//     } catch (err) {
//       setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã');
//       console.error(err);
//     } finally {
//       setIsLoading(false);
//     }
//   };

//   return (
//     <div className={styles.natalPage}>
//       <div className={styles.title}>–¢–≤–æ—è –Ω–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞</div>
//       <div className={styles.buttonBlock}>
//         <button 
//           className={styles.button}
//           onClick={handleGenerateChart}
//           disabled={isLoading}
//         >
//           {isLoading ? '–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞...' : '–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É üîÆ'}
//         </button>
//       </div>
      
//       {error && <div className={styles.error}>{error}</div>}
      
//       <div className={styles.natalChart}>
//         {chartData ? (
//           <img 
//             src={`${chartData.chart_image}`} 
//             alt="–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞" 
//           />
//         ) : (
//           <img src="/NatalChart4.svg" alt="–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞" />
//         )}
//       </div>

//       {isPopupOpen && chartData && (
//         <div className={styles.popupOverlay} onClick={() => setIsPopupOpen(false)}>
//           <div className={styles.popupContent} onClick={(e) => e.stopPropagation()}>
//             <button 
//               className={styles.closeButton}
//               onClick={() => setIsPopupOpen(false)}
//             >
//               √ó
//             </button>
            
//             <div className={styles.gridContainer}>
//               <div className={styles.gridItem}>
//                 <h3>–¢–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä</h3>
//                 <div className={styles.svgPlaceholder}></div>
//               </div>
              
//               <div className={styles.gridItem}>
//                 <h3>–¢–≤–æ—è —Å—Ç–∏—Ö–∏—è</h3>
//                 <div className={styles.svgPlaceholder}></div>
//               </div>
              
//               <div className={styles.gridItem}>
//                 <h3>–°–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h3>
//                 <div className={styles.svgPlaceholder}></div>
//               </div>
              
//               <div className={styles.gridItem}>
//                 <h3>–§–∏–Ω–∞–Ω—Å—ã</h3>
//                 <div className={styles.svgPlaceholder}></div>
//               </div>
              
//               <div className={styles.gridItem}>
//                 <h3>–û—Ç–Ω–æ—à–µ–Ω–∏—è</h3>
//                 <div className={styles.svgPlaceholder}></div>
//               </div>
              
//               <div className={styles.gridItem}>
//                 <h3>–ö–∞—Ä—å–µ—Ä–∞</h3>
//                 <div className={styles.svgPlaceholder}></div>
//               </div>
//             </div>
            
//             <div className={styles.chartPreview}>
//               <img 
//                 src={`${chartData.chart_image}`} 
//                 alt="–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞" 
//               />
//             </div>
//           </div>
//         </div>
//       )}
//     </div>
//   );
// };

// export default NatalChartPage;

import { useState, useEffect, useRef } from 'react';
import styles from "./styles.module.css";
import { generateChart } from '../../api/GetChart';
import type { ChartResponse } from '../../api/GetChart';

type InterpretationType = 
  | '–¢–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä' 
  | '–¢–≤–æ—è —Å—Ç–∏—Ö–∏—è' 
  | '–°–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã' 
  | '–§–∏–Ω–∞–Ω—Å—ã' 
  | '–û—Ç–Ω–æ—à–µ–Ω–∏—è' 
  | '–ö–∞—Ä—å–µ—Ä–∞'
  | '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏';

const NatalChartPage = () => {
  const [chartData, setChartData] = useState<ChartResponse | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [selectedInterpretation, setSelectedInterpretation] = 
    useState<InterpretationType>('–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏');
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const [isInterpretationOpen, setIsInterpretationOpen] = useState(false);
  const [currentInterpretation, setCurrentInterpretation] = 
    useState<InterpretationType>('–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏');
  
  const dropdownRef = useRef<HTMLDivElement>(null);
  const buttonRef = useRef<HTMLDivElement>(null);
  const popupRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const savedChart = localStorage.getItem('natalChart');
    if (savedChart) {
      setChartData(JSON.parse(savedChart));
    } else {
      loadChartData();
    }
  }, []);

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –≤–Ω–µ dropdown
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (isDropdownOpen && 
          dropdownRef.current && 
          buttonRef.current &&
          !dropdownRef.current.contains(event.target as Node) &&
          !buttonRef.current.contains(event.target as Node)) {
        setIsDropdownOpen(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [isDropdownOpen]);

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞
  useEffect(() => {
  if (isInterpretationOpen) {
    // –ü—Ä–æ—Å—Ç–æ —Å–∫—Ä–æ–ª–ª–∏–º –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ–∑–∏—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100px –æ—Ç –≤–µ—Ä—Ö–∞)
    window.scrollTo({
      top: 50,
      behavior: 'smooth'
    });
  }
}, [isInterpretationOpen]);

  const loadChartData = async () => {
    setIsLoading(true);
    setError(null);
    
    try {
      const data = {
        telegram_id: 665444333,
        name: "–†–æ–º–∞–Ω",
        date_year: 2004,
        date_month: 2,
        date_day: 10,
        date_hour: 9,
        date_min: 35,
        location_lat: 55.7558,
        location_lon: 83.6176,
        location_utc_offset: "+06:00"
      };
      
      const response = await generateChart(data);
      setChartData(response);
      localStorage.setItem('natalChart', JSON.stringify(response));
    } catch (err) {
      setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞—Ä—Ç—ã');
      console.error(err);
    } finally {
      setIsLoading(false);
    }
  };

  const toggleDropdown = () => {
    setIsDropdownOpen(prev => !prev);
  };

  const handleInterpretationSelect = (type: InterpretationType) => {
    if (type === '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏') return;
    
    setCurrentInterpretation(type);
    setSelectedInterpretation('–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏');
    setIsDropdownOpen(false);
    setIsInterpretationOpen(true);
  };

  const closeInterpretation = () => {
    setIsInterpretationOpen(false);
  };

const interpretationContent: Record<InterpretationType, string> = {
  '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏': '',
  '–¢–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä': '–í–∞—à —Ö–∞—Ä–∞–∫—Ç–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º –°–æ–ª–Ω—Ü–∞ –∏ –ê—Å—Ü–µ–Ω–¥–µ–Ω—Ç–∞ –≤ –≤–∞—à–µ–π –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–µ. –°–æ–ª–Ω—Ü–µ –≤ –û–≤–Ω–µ –ø—Ä–∏–¥–∞–µ—Ç –≤–∞–º —Å–º–µ–ª–æ—Å—Ç—å –∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –õ—É–Ω–∞ –≤ –†–∞–∫–µ –¥–µ–ª–∞–µ—Ç –≤–∞—Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –∏ –∑–∞–±–æ—Ç–ª–∏–≤—ã–º.',
  '–¢–≤–æ—è —Å—Ç–∏—Ö–∏—è': '–í–∞—à–∞ –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∞—è —Å—Ç–∏—Ö–∏—è - –û–≥–æ–Ω—å, —á—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≤–∞—à–µ–π —ç–Ω–µ—Ä–≥–∏—á–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç–∏. –û–¥–Ω–∞–∫–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –ó–µ–º–ª–∏ –≤ –≤–∞–∂–Ω—ã—Ö —Ç–æ—á–∫–∞—Ö –∫–∞—Ä—Ç—ã –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.',
  '–°–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã': '–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å. –°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å, –Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤–æ—Å—Ç—å, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—é.',
  '–§–∏–Ω–∞–Ω—Å—ã': '2-–π –¥–æ–º –≤ –¢–µ–ª—å—Ü–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª. –Æ–ø–∏—Ç–µ—Ä –≤ 8-–º –¥–æ–º–µ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–µ—Å—Ç–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞ –∏–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏.',
  '–û—Ç–Ω–æ—à–µ–Ω–∏—è': '–í–µ–Ω–µ—Ä–∞ –≤ –ë–ª–∏–∑–Ω–µ—Ü–∞—Ö –≤ 7-–º –¥–æ–º–µ –≥–æ–≤–æ—Ä–∏—Ç –æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–≤—è–∑–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º. –í—ã —Ü–µ–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.',
  '–ö–∞—Ä—å–µ—Ä–∞': `–î–æ—Ä–æ–≥–æ–π –†–æ–º–∞–Ω,

—Ç–≤–æ—è –Ω–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ ‚Äî —ç—Ç–æ —Å–ª–æ–≤–Ω–æ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ —è—Ä–∫–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è —Ç–µ–º–∞ –ª–∏—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —Å–∞–º–æ—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ç—Ä—É–¥, —Å–ª—É–∂–µ–Ω–∏–µ –ª—é–¥—è–º –∏ —Å–º–µ–ª–æ–µ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–¥–µ–π. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–¥—Ä–æ–±–Ω–æ —Ç–≤–æ–π –ø—É—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —É—á–∏—Ç—ã–≤–∞—è —Ç–≤–æ–∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ –¥–∞—Ä—ã, —Ç–∞–ª–∞–Ω—Ç—ã –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤—ã–∑–æ–≤—ã.

üåü –ü—Ä–∏—Ä–æ–¥–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ —Ç–∞–ª–∞–Ω—Ç—ã –≤ —Ä–∞–±–æ—Ç–µ

–° –°–æ–ª–Ω—Ü–µ–º –≤ –í–æ–¥–æ–ª–µ–µ (12 –¥–æ–º) —Ç—ã —Ä–æ–∂–¥—ë–Ω —Å –¥–∞—Ä–æ–º –≤–∏–¥–µ—Ç—å –º–∏—Ä –∏–Ω–∞—á–µ. –≠—Ç–æ —Ç–∞–ª–∞–Ω—Ç –∫ –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ–º—É –º—ã—à–ª–µ–Ω–∏—é, –Ω–æ–≤–∞—Ç–æ—Ä—Å—Ç–≤—É, –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å—Å—Ç–≤—É, —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –¢—ã —É–º–µ–µ—à—å –æ—â—É—â–∞—Ç—å —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏ –∏ –ø—Ä–µ–¥–≤–∏–¥–µ—Ç—å –±—É–¥—É—â–µ–µ ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∞–º –Ω–µ –≤—Å–µ–≥–¥–∞ –æ—Å–æ–∑–Ω–∞—ë—à—å —ç—Ç–æ. –ú–µ—Ä–∫—É—Ä–∏–π –∏ –ù–µ–ø—Ç—É–Ω –≤ 11 –¥–æ–º–µ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—é—Ç —Ç–≤–æ–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ, –¥—Ä—É–∂–µ—Å–∫–∏–º –ø—Ä–æ–µ–∫—Ç–∞–º, —É—á–∞—Å—Ç–∏—é –≤ —Å–µ—Ç–µ–≤—ã—Ö, —Å–æ—Ü–∏–∞–ª—å–Ω–æ-–∑–Ω–∞—á–∏–º—ã—Ö –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞—Ö. –¢–≤–æ—è –º—ã—Å–ª—å –æ—Å—Ç—Ä–∞—è, –Ω–æ –Ω–µ —à–∞–±–ª–æ–Ω–Ω–∞—è: —Ç—ã –∏—â–µ—à—å —Ä–µ—à–µ–Ω–∏—è —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Ç—É–ø–∏–∫–∏.

–ú–∞—Ä—Å –≤ –¢–µ–ª—å—Ü–µ –≤ 1 –¥–æ–º–µ –¥–∞—ë—Ç —Ç–µ–±–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–∏–ª—É, —Ç–µ—Ä–ø–µ–Ω–∏–µ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å. –≠—Ç–æ –∑–Ω–∞–∫, —á—Ç–æ —Ç—ã —Å–ø–æ—Å–æ–±–µ–Ω –≤–æ–ø–ª–æ—â–∞—Ç—å —Å–≤–æ–∏ –∏–¥–µ–∏ –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º —Ç—Ä—É–¥–æ–º. –ü—Ä–∏ —ç—Ç–æ–º –ú–∞—Ä—Å –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —É–ø–æ—Ä–Ω—ã–º, –Ω–∞—Å—Ç–æ–π—á–∏–≤—ã–º, —Å–∫–ª–æ–Ω–Ω—ã–º –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –í–∞–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å—Å—è —Å–æ–µ–¥–∏–Ω—è—Ç—å –≤–æ–∑–¥—É—à–Ω—É—é –≤–æ–¥–æ–ª–µ–π—Å–∫—É—é –∏–Ω—Ç—É–∏—Ü–∏—é —Å –∑–µ–º–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π –¢–µ–ª—å—Ü–∞ ‚Äî —Ç–æ–≥–¥–∞ —Ä–æ–∂–¥–∞—é—Ç—Å—è –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã.

üõ§Ô∏è –ü–æ–¥—Ö–æ–¥—è—â–∏–µ —Å—Ñ–µ—Ä—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–í –∫–∞—Ä—Ç–µ –æ—á–µ–Ω—å —è—Ä–∫–æ –≤—ã–¥–µ–ª–µ–Ω 6 –¥–æ–º (—Ä–∞–±–æ—Ç–∞, —Å–ª—É–∂–µ–Ω–∏–µ), –≤ –î–µ–≤–µ ‚Äî –∑–Ω–∞–∫ –∞–Ω–∞–ª–∏–∑–∞, –º–µ–¥–∏—Ü–∏–Ω—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –õ—É–Ω–∞ –∏ –Æ–ø–∏—Ç–µ—Ä –≤ –î–µ–≤–µ –≤ 6 –¥–æ–º–µ –¥–∞—é—Ç —è–≤–Ω—ã–π —Ç–∞–ª–∞–Ω—Ç –∫ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –∑–∞–±–æ—Ç–µ, —É–ª—É—á—à–µ–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –¢—ã –º–æ–∂–µ—à—å –±—ã—Ç—å –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–º:

¬∑ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–º, –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–º, –∏–Ω–∂–µ–Ω–µ—Ä–æ–º

¬∑ –≤—Ä–∞—á–æ–º –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º –≤ —Å—Ñ–µ—Ä–µ –∑–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

¬∑ —ç–∫–æ–ª–æ–≥–æ–º, –∞–≥—Ä–æ–Ω–æ–º–æ–º, –±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–æ–º

¬∑ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–æ–≤, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º

¬∑ IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞—Ö

¬∑ –ø–µ–¥–∞–≥–æ–≥–æ–º, –º–µ–Ω—Ç–æ—Ä–æ–º, —á–µ–ª–æ–≤–µ–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –¥—Ä—É–≥–∏–º —Ä–∞—Å—Ç–∏

–ü—Ä–∏ —ç—Ç–æ–º 12 –¥–æ–º —Å —Å–∏–ª—å–Ω—ã–º –°–æ–ª–Ω—Ü–µ–º –∏ –í–µ–Ω–µ—Ä–æ–π –Ω–∞–º–µ–∫–∞–µ—Ç –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–æ–ª–µ–µ ¬´–∑–∞–∫—É–ª–∏—Å–Ω–æ–π¬ª, —Ç–∏—Ö–æ–π —Ä–∞–±–æ—Ç—ã: –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è, –∞—Ä—Ö–∏–≤, –º–æ–Ω–∞—Å—Ç—ã—Ä—å, –±–æ–ª—å–Ω–∏—Ü–∞, –ù–ö–û. –ó–¥–µ—Å—å —Ç—ã —Å–ø–æ—Å–æ–±–µ–Ω —Ç–≤–æ—Ä–∏—Ç—å –¥–æ–±—Ä–æ –∏ –ø–µ—Ä–µ–º–µ–Ω—ã –±–µ–∑ –∏–∑–ª–∏—à–Ω–µ–π –ø–æ–∫–∞–∑–Ω–æ–π —Å–ª–∞–≤—ã.

üå± –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è —Ä–æ—Å—Ç–∞

–¢–≤–æ–π –≥–æ—Ä–æ—Å–∫–æ–ø –±—É–∫–≤–∞–ª—å–Ω–æ –∑–æ–≤—ë—Ç –∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é. –î–µ–≤–∏–π—Å–∫–∏–π 6 –¥–æ–º —Ç—Ä–µ–±—É–µ—Ç –Ω–µ —Å—Ç–æ—è—Ç—å –Ω–∞ –º–µ—Å—Ç–µ ‚Äî –∏–∑—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã, –æ—Ç—Ç–∞—á–∏–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ. –°–µ–≤–µ—Ä–Ω—ã–π —É–∑–µ–ª –≤ –¢–µ–ª—å—Ü–µ –≤ 1 –¥–æ–º–µ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –≤–∞–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å—Å—è –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Å–µ–±—è, —Ü–µ–Ω–∏—Ç—å —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã –∏ –Ω–µ –±–æ—è—Ç—å—Å—è –∑–∞—è–≤–∏—Ç—å –º–∏—Ä—É –æ —Ç–æ–º, —á—Ç–æ —Ç—ã —É–º–µ–µ—à—å.

–≠—Ç–æ —Ä–æ—Å—Ç –æ—Ç –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã—Ö –∏–¥–µ–π –∫ –ª–∏—á–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –û—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ ¬´–Ω–∞–¥–æ –ø–æ–º–æ–≥–∞—Ç—å –≤—Å–µ–º¬ª –∫ –æ—á–µ–Ω—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É ¬´–≤–æ—Ç –∫–∞–∫ —è —ç—Ç–æ —Å–¥–µ–ª–∞—é —Å–≤–æ–∏–º–∏ —Ä—É–∫–∞–º–∏¬ª.

‚ö° –í–æ–∑–º–æ–∂–Ω—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Å–æ–≤–µ—Ç—ã

–¢–≤–æ—è –∫–∞—Ä—Ç–∞ –Ω–µ –ª–∏—à–µ–Ω–∞ –≤—ã–∑–æ–≤–æ–≤.

–°–æ–ª–Ω—Ü–µ –∏ –í–µ–Ω–µ—Ä–∞ –≤ 12 –¥–æ–º–µ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø–æ—Ç–µ—Ä—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏, —É—Ö–æ–¥ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –∂–µ–ª–∞–Ω–∏–µ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è. –°–æ–≤–µ—Ç: –Ω–µ –±–æ–π—Å—è –±—Ä–∞—Ç—å –Ω–∞ —Å–µ–±—è –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç—Ä–∞—à–Ω–æ.

–ú–∞—Ä—Å –≤ –¢–µ–ª—å—Ü–µ ‚Äî —É–ø—Ä—è–º—Å—Ç–≤–æ –∏ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–∑–º. –≠—Ç–æ –¥–∞—ë—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –º–µ–Ω—è—Ç—å—Å—è. –£—á–∏—Å—å —Å–ª—ã—à–∞—Ç—å –Ω–æ–≤–æ–µ, –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞—Ç—å –≤ —Å—Ç–∞—Ä–æ–º.

–õ—É–Ω–∞ –≤ 6 –¥–æ–º–µ –≤ –í–µ—Å–∞—Ö —Å–∫–ª–æ–Ω–Ω–∞ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è, –∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Å–≤–æ–∏–º –º–Ω–µ–Ω–∏–µ–º —Ä–∞–¥–∏ –º–∏—Ä–∞. –ù–æ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –≥–æ–≤–æ—Ä–∏—Ç—å ¬´–Ω–µ—Ç¬ª, —Ä–∞—Å—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã.

–Æ–ø–∏—Ç–µ—Ä –≤ 6 –¥–æ–º–µ –≤ –î–µ–≤–µ –¥–∞—ë—Ç –≤—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ–±–µ. –≠—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤—ã–≥–æ—Ä–∞–Ω–∏—é. –ü–æ–º–Ω–∏ –æ –±–∞–ª–∞–Ω—Å–µ.

üåÑ –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ–±—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–ª–Ω–æ

–¢–≤–æ—è –∫–∞—Ä—Ç–∞ —Å–æ–≤–µ—Ç—É–µ—Ç –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã–º –∏ –ª–∏—á–Ω—ã–º. –†–∞–±–æ—Ç–∞–π –≤ –∫–æ–º–∞–Ω–¥–µ, –Ω–æ –Ω–µ —Ç–µ—Ä—è–π —Å–≤–æ—ë ¬´—è¬ª. –£—á–∞—Å—Ç–≤—É–π –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –Ω–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–π –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–≤–æ–µ–π –¥–æ–±—Ä–æ—Ç–æ–π –±–µ–∑ –º–µ—Ä—ã.

–°—Ç–∞—Ä–∞–π—Å—è —Å–æ—á–µ—Ç–∞—Ç—å –∏–¥–µ–∞–ª–∏–∑–º –í–æ–¥–æ–ª–µ—è —Å –ø—Ä–∞–∫—Ç–∏—Ü–∏–∑–º–æ–º –¢–µ–ª—å—Ü–∞. –≠—Ç–æ —Ç–≤–æ—è –∑–æ–ª–æ—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞.

–ü—Ä–µ–≤—Ä–∞—Ç–∏ –ª—é–±–æ–≤—å –∫ –ª—é–¥—è–º –≤ —É–º–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –±–µ–∑ –ª–∏—à–Ω–µ–π –∂–µ—Ä—Ç–≤—ã.

–†–∞–∑–≤–∏–≤–∞–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏. IT, –∏–Ω–∂–µ–Ω–µ—Ä–∏—è, –º–µ–¥–∏—Ü–∏–Ω–∞, —ç–∫–æ–ª–æ–≥–∏—è ‚Äî —Å—Ñ–µ—Ä—ã, –≥–¥–µ —Ç—ã —Å–º–æ–∂–µ—à—å —Å–æ–µ–¥–∏–Ω–∏—Ç—å —É–º, —Å–µ—Ä–¥—Ü–µ –∏ —Ä—É–∫–∏.

–ù–µ –∏–∑–±–µ–≥–∞–π –ª–∏–¥–µ—Ä—Å—Ç–≤–∞. –¢–≤–æ–π —Å–µ–≤–µ—Ä–Ω—ã–π —É–∑–µ–ª –≤ 1 –¥–æ–º–µ –∑–æ–≤—ë—Ç –∫ —Ç–æ–º—É, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å –∑–∞–º–µ—Ç–Ω—ã–º, —É–≤–µ—Ä–µ–Ω–Ω—ã–º, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º.

–í –∏—Ç–æ–≥–µ —Ç–≤–æ–π –ø—É—Ç—å ‚Äî —ç—Ç–æ –ø—É—Ç—å –º–∞—Å—Ç–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Å–ª—É–∂–∏—Ç—å –º–∏—Ä—É —á–µ—Ä–µ–∑ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä—É–¥ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–µ –∏–¥–µ–∏. –¢–≤–æ—ë –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —É–ª—É—á—à–∞—Ç—å –∂–∏–∑–Ω–∏ –ª—é–¥–µ–π, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã, —Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤–æ–µ –Ω–∞ –ø—Ä–æ—á–Ω–æ–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–µ –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±–æ—è—Ç—å—Å—è –±—ã—Ç—å —Å–æ–±–æ–π.

–° –ª—é–±–æ–≤—å—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π,
–¢–≤–æ–π –ª–∏—á–Ω—ã–π —Ç–∞—Ä–æ–ª–æ–≥‚ù§Ô∏è`
};

  return (
    <div className={styles.natalPage}>
      <h1 className={styles.title}>–¢–≤–æ—è –Ω–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞</h1>
      
      <div className={styles.description}>
        –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ - —ç—Ç–æ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–∞—Å–ø–æ—Ä—Ç —á–µ–ª–æ–≤–µ–∫–∞, 
        –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç –≤ –º–æ–º–µ–Ω—Ç —Ä–æ–∂–¥–µ–Ω–∏—è. 
        –û–Ω–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –ª–∏—á–Ω–æ—Å—Ç–∏, —Å–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã.
      </div>

      <div className={styles.interpretationBlock}>
        <div 
          ref={buttonRef}
          className={styles.interpretationButton}
          onClick={toggleDropdown}
        >
          {selectedInterpretation}
          <span className={styles.arrow}>{isDropdownOpen ? '‚ñ≤' : '‚ñº'}</span>
        </div>
        
        <div 
          ref={dropdownRef}
          className={`${styles.interpretationMenu} ${isDropdownOpen ? styles.open : ''}`}
        >
          {([
            '–¢–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä',
            '–¢–≤–æ—è —Å—Ç–∏—Ö–∏—è',
            '–°–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã',
            '–§–∏–Ω–∞–Ω—Å—ã',
            '–û—Ç–Ω–æ—à–µ–Ω–∏—è',
            '–ö–∞—Ä—å–µ—Ä–∞'
          ] as InterpretationType[]).map((item) => (
            <div
              key={item}
              className={styles.interpretationMenuItem}
              onClick={() => handleInterpretationSelect(item)}
            >
              {item}
            </div>
          ))}
        </div>
      </div>

      <div className={styles.natalChart}>
        {isLoading ? (
          <div className={styles.loader}>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã...</div>
        ) : chartData ? (
          <img 
            src={chartData.chart_image} 
            alt="–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞" 
            className={styles.chartImage}
          />
        ) : (
          <div className={styles.placeholder}>
            –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
          </div>
        )}
      </div>

      {error && <div className={styles.error}>{error}</div>}

      {isInterpretationOpen && (
        <div 
          className={styles.popupOverlay} 
          onClick={closeInterpretation}
          ref={popupRef}
        >
          <div className={styles.popupContent} onClick={(e) => e.stopPropagation()}>
            <h3 className={styles.popupTitle}>{currentInterpretation}</h3>
            <p className={styles.popupText}>
              {interpretationContent[currentInterpretation]}
            </p>
            <div className={styles.popupButtons}>
              <button 
                className={styles.popupCancel}
                onClick={closeInterpretation}
              >
                –ó–∞–∫—Ä—ã—Ç—å
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default NatalChartPage;